(self.webpackChunk=self.webpackChunk||[]).push([[884],{96249:function(e,t,r){"use strict";r.d(t,{B5:function(){return o},E1:function(){return i},MX:function(){return a},aj:function(){return l},bt:function(){return d}});var n=r(78513);function o(e,t,r){if(!e)return[];var n=[];return e.members.forEach((function(e){e!==r&&n.push({value:t[e]._id,text:t[e].fullName})})),n}function i(e){return{text:e.text.trim(),debtAmount:e.debtAmount.trim(),debtor_id:e.debtor_id,neighborhood_id:e.neighborhood_id,dueDate:e.dueDate?new Date(e.dueDate).toISOString():null}}function a(e){return{text:e.text.trim(),debtAmount:e.debtAmount.trim(),dueDate:e.dueDate?new Date(e.dueDate).toISOString():null}}function d(e,t,r){return e.filter((function(e){return e.debtAmount-e.repaidAmount>0})).reduce((function(e,n){if(n[r]!==t){var o=e.findIndex((function(e){return e.neighborhood===n.neighborhood&&e.user===n[r]}));o>=0?e[o].amount+=n.debtAmount-n.repaidAmount:e.push({amount:n.debtAmount-n.repaidAmount,user:n[r],neighborhood:n.neighborhood})}return e}),[])}function l(e,t,r){return e.filter((function(e){switch(t){case n.j.active:return e.debtAmount-e.repaidAmount>0;case n.j.closed:return e.debtAmount-e.repaidAmount<=0;case n.j.overdue:return!!(e.dueDate&&e.debtAmount>e.repaidAmount)&&new Date>new Date(e.dueDate);case n.j.myDebts:return e.debtor===r._id&&e.debtAmount>e.repaidAmount;case n.j.myDebtors:return e.author===r._id&&e.debtAmount>e.repaidAmount;case n.j.all:default:return!0}}))}},16884:function(e,t,r){"use strict";r.r(t);var n=r(64649),o=r(65809),i=r(27378),a=r(48646),d=r(91665),l=r(33047),u=r(12284),c=r(26904),s=r(68732),m=r(88922),b=r(96249),f=r(12693),p=r(14935),A=r(65783),g=r(604),h=r(57235),x=r.n(h);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(){var e,t,r,h,v,C,E=(0,p.UO)().debtId,B=(0,f.C)((function(e){return e.debts.entities[E]})),y=(0,A.lr)(),$=(0,o.Z)(y,1)[0].get("neighborhood_id"),w=(0,i.useState)({debtAmount:B?B.debtAmount.toString():"",text:B?B.text:"",errors:{},dueDate:null!=B&&B.dueDate?new Date(B.dueDate):null}),O=(0,o.Z)(w,2),j=O[0],k=O[1],_=(0,i.useState)(!1),P=(0,o.Z)(_,2),T=P[0],F=P[1],z=(0,p.s0)(),N=(0,f.T)(),S=(0,m.$G)().t;(0,i.useEffect)((function(){E&&B||z("/debts".concat($?"?neighborhood_id=".concat($):""))}),[]);var W=(0,i.useCallback)((function(e){var t=e.target,r=t.name,o=t.value;k((function(e){var t=D(D({},e),{},(0,n.Z)({},r,o));return D(D({},t),{},{errors:(0,s.Z)(t,B)})}))}),[]);return i.createElement("div",{className:x().EditDebtPageWrapper},i.createElement("div",{className:x().EditDebtFormWrapper},i.createElement("div",{className:x().EditDebtTitleWrapper},i.createElement("div",{className:x().EditDebtBack},i.createElement(a.Z,null)),i.createElement("h3",{className:x().EditDebtTitle},S("editDebt"))),i.createElement("form",{className:x().EditDebtForm},i.createElement("div",{className:"mb-16"},i.createElement(d.Z,{label:"".concat(S("debtDateRepayment")," (").concat(S("optionalSmall"),")"),value:j.dueDate,onChange:W,name:"dueDate",isInvalid:Boolean(null===(e=j.errors)||void 0===e?void 0:e.dueDate),error:null===(t=j.errors)||void 0===t?void 0:t.dueDate,placeholder:S("selectDate")})),i.createElement("div",{className:"mb-16"},i.createElement(l.Z,{onChange:W,value:j.debtAmount,name:"debtAmount",label:S("debtAmount"),placeholder:S("enterAmount"),error:null===(r=j.errors)||void 0===r?void 0:r.debtAmount,isInvalid:Boolean(null===(h=j.errors)||void 0===h?void 0:h.debtAmount)})),i.createElement("div",{className:"mb-32"},i.createElement(u.Z,{onChange:W,value:j.text,name:"text",label:S("text"),placeholder:S("enterText"),error:null===(v=j.errors)||void 0===v?void 0:v.text,isInvalid:Boolean(null===(C=j.errors)||void 0===C?void 0:C.text)})),i.createElement("div",{className:"mb-16"},i.createElement(c.Z,{onClick:function(e){if(e.preventDefault(),!Object.values(j.errors).length){F(!0);var t=(0,b.MX)(j);N((0,g.nz)({id:E,values:t})).then((function(){z("/debts".concat($?"?neighborhood_id=".concat($):""))})).finally((function(){F(!1)}))}},text:S("edit"),disabled:Boolean(Object.values(j.errors).length)||T})))))}},78513:function(e,t,r){"use strict";r.d(t,{j:function(){return n}});var n=function(e){return e.all="all",e.active="active",e.closed="closed",e.overdue="overdue",e.myDebts="myDebts",e.myDebtors="myDebtors",e}({})},68732:function(e,t,r){"use strict";r.d(t,{Y:function(){return m},Z:function(){return b}});var n=r(64649),o=r(30298),i=r(22501),a=r(67226);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=i.ZP.t;function c(e){var t={};if(e){var r=new Date;if(r.setFullYear(r.getFullYear()+2),e>r)return t.dueDate=u("maxRepaymentPeriod"),t}return t}function s(e){var t={},r=e.trim();return r?r.length<a.zm.minText?(t.description=u("atLeast",{value:a.zm.minText}),t):r.length>a.zm.maxText?(t.description=u("lessThan",{value:a.zm.maxText}),t):t:(t.text=u("requiredField"),t)}function m(e){var t,r=(t={},e.neighborhood_id.trim()||(t.neighborhood_id=u("requiredField")),t),n=function(e){var t={};return e.trim()||(t.debtor_id=u("requiredField")),t}(e.debtor_id),i=function(e){var t={};if(!e)return t.debtAmount=u("requiredField"),t;var r=parseFloat(e);return o.AK.test(e)?r>a.zm.maxAmount?(t.debtAmount=u("lessThanNumber",{value:a.zm.maxAmount}),t):r<a.zm.minAmount?(t.debtAmount=u("atLeastNumber",{value:a.zm.minAmount}),t):t:(t.debtAmount=u("onlyNumbers"),t)}(e.debtAmount),d=c(e.dueDate),m=s(e.text);return l(l(l(l(l({},r),n),i),d),m)}function b(e,t){var r=function(e,t){var r={};if(!e)return r.debtAmount=u("requiredField"),r;var n=parseFloat(e);return o.AK.test(e)?n<t?(r.debtAmount=u("newDebtAmountError"),r):n>a.zm.maxAmount?(r.debtAmount=u("lessThanNumber",{value:a.zm.maxAmount}),r):n<a.zm.minAmount?(r.debtAmount=u("atLeastNumber",{value:a.zm.minAmount}),r):r:(r.debtAmount=u("onlyNumbers"),r)}(e.debtAmount,t.repaidAmount),n=c(e.dueDate),i=s(e.text);return l(l(l({},r),n),i)}},72506:function(e,t,r){"use strict";r.r(t);var n=r(20559),o=r.n(n),i=r(93476),a=r.n(i)()(o());a.push([e.id,'.EditDebtPageWrapper_ok2sR{display:flex;justify-content:center}.EditDebtFormWrapper__q07S{margin-top:30px;width:100%;max-width:420px}.EditDebtBack_r8HST{position:absolute;grid-area:link}.EditDebtTitleWrapper_cu7He{width:100%;display:grid;align-items:center;grid-template-areas:"link title .";grid-template-columns:minmax(100px, 1fr) auto minmax(100px, 1fr);margin-bottom:30px}.EditDebtTitle_NYZsx{font-size:32px;font-weight:700;line-height:24px;color:#0f0f10;align-self:center;font-size:22px;grid-area:title;margin:0;flex-grow:1;color:#485268}.EditDebtForm_OKz2k{padding:30px 20px;background-color:#fff;border-radius:5px}\n',"",{version:3,sources:["webpack://./pages/EditDebtPage/EditDebtPage.module.scss","webpack://./styles/_mixins.scss","webpack://./styles/_variables.scss"],names:[],mappings:"AAEA,2BACE,YAAa,CACb,sBAAuB,CACxB,2BAGC,eAAgB,CAChB,UAAW,CACX,eAAgB,CACjB,oBAGC,iBAAkB,CAClB,cAAe,CAChB,4BAGC,UAAW,CACX,YAAa,CACb,kBAAmB,CACnB,kCAAmC,CACnC,gEAA+D,CAC/D,kBAAmB,CACpB,qBCJC,cAAe,CACf,eAAgB,CAChB,gBAAiB,CACjB,aCFwB,CFOxB,iBAAkB,CAClB,cAAe,CACf,eAAgB,CAChB,QAAS,CACT,WAAY,CACZ,aEX8B,CFY/B,oBAGC,iBAAkB,CAClB,qBEhCoB,CFiCpB,iBEHiB",sourcesContent:['@import "@src/styles/mixins";\r\n\r\n.EditDebtPageWrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.EditDebtFormWrapper {\r\n  margin-top: 30px;\r\n  width: 100%;\r\n  max-width: 420px;\r\n}\r\n\r\n.EditDebtBack {\r\n  position: absolute;\r\n  grid-area: link;\r\n}\r\n\r\n.EditDebtTitleWrapper {\r\n  width: 100%;\r\n  display: grid;\r\n  align-items: center;\r\n  grid-template-areas: "link title .";\r\n  grid-template-columns: minmax(100px,1fr) auto minmax(100px,1fr);\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.EditDebtTitle {\r\n  @include title;\r\n  align-self: center;\r\n  font-size: 22px;\r\n  grid-area: title;\r\n  margin: 0;\r\n  flex-grow: 1;\r\n  color: $title-light-text-color;\r\n}\r\n\r\n.EditDebtForm {\r\n  padding: 30px 20px;\r\n  background-color: $component-bg;\r\n  border-radius: $border-radius;\r\n}\r\n\r\n','@import "variables";\r\n\r\n@mixin for-tablet {\r\n  @media screen and (min-width: 744px) {\r\n    @content;\r\n  }\r\n}\r\n\r\n@mixin for-laptop {\r\n  @media screen and (min-width: 1044px) {\r\n    @content;\r\n  }\r\n}\r\n\r\n@mixin for-desktop {\r\n  @media screen and (min-width: 1260px) {\r\n    @content;\r\n  }\r\n}\r\n\r\n@mixin title {\r\n  font-size: 32px;\r\n  font-weight: 700;\r\n  line-height: 24px;\r\n  color: $title-text-color;\r\n}\r\n\r\n@mixin container {\r\n  max-width: 1220px;\r\n  margin: 0 auto;\r\n  padding: 0 10px;\r\n}\r\n',"$body-color: #fff;\r\n$content-color: #f5f6fa;\r\n$content-color-hover: #fbfbfb;\r\n$background-color-text-field: #e8f0fe;\r\n$light-field-hover: #f7f8fb;\r\n$light-bg-color: #eeeff3;\r\n$disabled-text-field: #e9eaef;\r\n$component-bg: #ffffff;\r\n$chat-bg: #fafbfd;\r\n$primary-color: #2C9E95;\r\n$primary-color-disabled: #74a9a5;\r\n$primary-color-active: #45a29a;\r\n$primary-color-hover: #278981;\r\n$primary-color-light: #ecfffe;\r\n$primary-color-light-hover: #c5fffd;\r\n$border-color: #dee2ed;\r\n$border-color-hover: #dee2ed;\r\n$border-color-active: #8b93a6;\r\n$bright-text-color: #626264;\r\n$light-text-color: #bfc5d1;\r\n$text-color: #333a4a;\r\n$dark-text-color: #18181a;\r\n$title-text-color: #0f0f10;\r\n$title-light-text-color: #485268;\r\n$reverse-text-color: #fff;\r\n$danger-color: #f14f4f;\r\n$danger-color-hover: #d74242;\r\n$danger-color-transparent: rgba(241, 79, 79, 0.25);\r\n$success-color: #72b274;\r\n$success-color-transparent: rgba(114, 178, 116, 0.25);\r\n$info-color: #ea9f40;\r\n$info-color-transparent: rgba(234, 159, 64, 0.25);\r\n$font-family: 'Manrope', sans-serif;\r\n$modal-bg: rgba(72,82,104,.6);\r\n$box-shadow: rgba(0, 0, 0, 0.10) 0px 20px 40px 0px;\r\n$light-box-shadow: 0 0 5px rgba(0, 0, 0, 0.15);\r\n\r\n$border-radius: 5px;\r\n\r\n$header-height: 60px;\r\n$sidebar-width: 80px;\r\n$page-controls-height: 72px;\r\n"],sourceRoot:""}]),a.locals={EditDebtPageWrapper:"EditDebtPageWrapper_ok2sR",EditDebtFormWrapper:"EditDebtFormWrapper__q07S",EditDebtBack:"EditDebtBack_r8HST",EditDebtTitleWrapper:"EditDebtTitleWrapper_cu7He",EditDebtTitle:"EditDebtTitle_NYZsx",EditDebtForm:"EditDebtForm_OKz2k"},t.default=a},57235:function(e,t,r){var n=r(1892),o=r(95760),i=r(38311),a=r(58192),d=r(38060),l=r(54865),u=r(72506);u=u.__esModule?u.default:u;var c={};c.styleTagTransform=l,c.setAttributes=a,c.insert=i.bind(null,"head"),c.domAPI=o,c.insertStyleElement=d,n(u,c),e.exports=u&&u.locals||{}}}]);
//# sourceMappingURL=884.js.map